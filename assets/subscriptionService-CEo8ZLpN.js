import{A as r,a as c,b as u}from"./index-BX0d2YwR.js";class s{static async subscribe(e,i){try{console.log(`Subscribing user ${e.user_id} to ${i} plan...`);const t=r.createSubscriptionRequest(e,i);console.log("Subscription request:",t);const n=await c.put(u.SUBSCRIBE,t,{timeout:1e4,retries:2,headers:{Accept:"*/*"}});if(!n.success)return{error:this.getSubscriptionErrorMessage(n.error)};if(n.data.error)return{error:this.getSubscriptionErrorMessage(n.data.error)};const a=r.transformSubscriptionResponse(e,n.data);return console.log("Subscription successful:",{userId:a.user_id,subscription:a.subscription,expiryDate:a.subscriptionExpiry}),{user:a}}catch(t){return console.error("Subscription error:",t),{error:this.getSubscriptionErrorMessage(t)}}}static getSubscriptionPricing(){return{monthly:{price:9.99,savings:0},annual:{price:99.99,savings:19.89}}}static getSubscriptionBenefits(){return["Unlimited parking searches","Real-time availability updates","Advanced filtering options","Favorite carparks management","Driving time estimates","Priority customer support","No advertisements"]}static getSubscriptionStatus(e){const i=r.getSubscriptionInfo(e);return{isPremium:e.subscription==="premium",isActive:i.isActive,daysRemaining:i.daysRemaining,expiryDate:i.expiryDate,canUpgrade:!i.isActive}}static canAccessFeature(e,i){return["advanced_search","real_time_updates","driving_estimates","unlimited_searches","priority_support"].includes(i)?r.canAccessPremiumFeatures(e):!0}static getFeatureAccessMessage(e,i){return this.canAccessFeature(e,i)?null:r.getSubscriptionInfo(e).status==="expired"?"Your premium subscription has expired. Renew to access this feature.":"This is a premium feature. Upgrade to access advanced functionality."}static previewSubscriptionEndDate(e,i){return r.calculateSubscriptionEndDate(e,i)}static getSubscriptionErrorMessage(e){if(typeof e=="string"){if(e.includes("payment")||e.includes("card"))return"Payment failed. Please check your payment method and try again.";if(e.includes("network")||e.includes("timeout"))return"Network error. Please check your connection and try again.";if(e.includes("already")||e.includes("active"))return"You already have an active subscription."}return"Subscription failed. Please try again or contact support."}static formatSubscriptionDate(e){return e.toLocaleDateString("en-SG",{year:"numeric",month:"long",day:"numeric"})}static getRenewalReminderMessage(e){const i=r.getSubscriptionInfo(e);return!i.isActive||!i.daysRemaining?null:i.daysRemaining<=3?`Your premium subscription expires in ${i.daysRemaining} day(s). Renew now to continue enjoying premium features.`:i.daysRemaining<=7?`Your premium subscription expires in ${i.daysRemaining} days. Consider renewing soon.`:null}}s.subscribe.bind(s);s.getSubscriptionStatus.bind(s);s.canAccessFeature.bind(s);export{s as SubscriptionService};
